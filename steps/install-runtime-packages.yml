########################################################################
# Installs packages needed to run server, MTR and RQG
# (and possibly other tools)
########################################################################

parameters:
  condition: succeeded()

  PACKAGES: 'libdbi-perl libdbd-mysql-perl libsnappy1v5 gdb'
  EXTRA_PACKAGES: ''
  
steps:
  - script: |
      set -x
      sudo apt-get update
      sudo apt-get install -y -q $PAR_PACKAGES $PAR_EXTRA_PACKAGES
    displayName: 'Install runtime packages'
    condition: ${{ parameters.condition }}
    env:
      PAR_PACKAGES: ${{ parameters.PACKAGES }}
      PAR_EXTRA_PACKAGES: ${{ parameters.EXTRA_PACKAGES }}
